import React, { Component } from 'react';
import { NavLink } from 'react-router-dom';

import './header.css';

export default class HeaderComponent extends Component {
    constructor(props) {
        super(props);
        this.state = {
            roomName: '',
            redirect: false
        }
    }

    componentWillReceiveProps(newProps) {
        let roomName = newProps.location.state !== undefined ? newProps.location.state.roomName : this.state.roomName;
        roomName = (this.props.location.state === undefined && newProps.location.state !== undefined) ? newProps.location.state.roomName : roomName;

        this.setState({
            roomName: roomName,
            redirect: newProps.location.state !== undefined ? newProps.location.state.redirect : false,
        })
    }

    render() {
        const { roomName, redirect } = this.state;
        const { match } = this.props;
        return (
            <header>
                <nav className="lobby__nav">
                    {match.path !== '/' &&
                    <ul className="lobby-nav__items">
                        <li>

                            <NavLink className="nav__link" to="/">
                                {redirect === false ?
                                    <span className="lobby-link">
                                        <span className="icon icon__nav-arrow">
                                            <svg width="27" height="50" viewBox="0 0 27 50"><title>Return to Lobby</title><path d="M5.976 24.848l20.328 20.967a2.454 2.454 0 0 1-.074 3.497 2.52 2.52 0 0 1-3.534-.073l-22-22.691a2.454 2.454 0 0 1 .012-3.437l22-22.363a2.52 2.52 0 0 1 3.535-.047 2.454 2.454 0 0 1 .049 3.496L5.976 24.848z"/></svg>
                                        </span>
                                        Lobby
                                    </span>
                                    :
                                    <span className="icon icon__refresh">
                                        <svg width="50" height="39" viewBox="0 0 50 39"><title>Refresh</title><path d="M49.506 23.862l-5.699-8.573a1.816 1.816 0 0 0-1.41-.809 1.848 1.848 0 0 0-1.508.656l-6.557 7.929a1.815 1.815 0 0 0 .245 2.555c.773.633 1.92.522 2.56-.245l3.371-4.076c-.887 6.309-5.84 11.93-12.03 13.403-5.242 1.254-10.67-.284-14.515-4.115-.689-.683-1.886-.68-2.57.004a1.813 1.813 0 0 0 .003 2.565c3.63 3.613 8.412 5.604 13.464 5.604 1.496 0 2.999-.178 4.465-.529 7.64-1.822 13.554-8.288 14.76-15.96l2.391 3.597c.537.805 1.717 1.042 2.52.508a1.8 1.8 0 0 0 .777-1.15 1.8 1.8 0 0 0-.267-1.364m-33.621-7.408a1.803 1.803 0 0 0-.653-1.227 1.801 1.801 0 0 0-1.33-.406c-.483.046-.92.278-1.23.65L8.755 20.21c-.05-2.962.742-5.884 2.317-8.517 2.306-3.851 6.043-6.635 10.255-7.639 5.582-1.336 11.422.536 15.234 4.886.658.751 1.81.828 2.565.172.366-.319.584-.761.617-1.245a1.802 1.802 0 0 0-.445-1.315C34.594 1.182 27.38-1.125 20.48.524c-5.158 1.23-9.725 4.622-12.53 9.309a19.89 19.89 0 0 0-2.708 8.015l-1.907-2.87a1.826 1.826 0 0 0-2.521-.51c-.405.268-.68.677-.777 1.152-.097.474-.002.959.267 1.362l5.7 8.576c.328.492.858.78 1.515.81.545 0 1.056-.24 1.403-.658l6.556-7.93c.309-.373.453-.845.407-1.326"/></svg>
                                    </span>
                                }
                            </NavLink>
                        </li>
                        <li className="lobby-nav__room-info">
                            <span className="room__name">{roomName}</span> <span className="room__id">Store {match.params.roomId}</span>
                        </li>
                    </ul>
                    }
                </nav>
                <div className="lobby__name">
                    <div className="wrapper__logo">
                        <svg className="logo" width="300" height="25" viewBox="0 0 300 25"><title>Talbots VSV</title><g fill="none"><path fill="#343537" d="M285.952 23.442c-2.856-6.588-5.72-13.172-8.578-19.759-.417-.917-.91-1.862-1.76-2.451-.8-.556-1.814-.632-2.76-.64V.185h10.28v.408c-.837.01-1.7.024-2.49.336-.432.167-.799.543-.87 1.014-.093.608.125 1.208.353 1.762.652 1.5 1.314 2.995 1.966 4.496l4.892 11.18c4.089-9.5 6.35-14.763 6.786-15.79.22-.547.39-1.17.198-1.75-.153-.462-.577-.765-1.013-.933-.714-.269-1.488-.306-2.243-.316V.186h8.616V.59c-.996.006-2.047.164-2.865.773-.797.569-1.3 1.444-1.698 2.317-2.852 6.589-5.695 13.18-8.548 19.768-.067-.003-.2-.006-.266-.007zM264.672.002l.402-.002c-.002 2.599 0 5.199 0 7.798h-.371c-.212-1.784-.675-3.638-1.876-5.029-.723-.84-1.739-1.405-2.82-1.63-.98-.199-2.027-.246-2.977.114-1.101.393-2.008 1.318-2.336 2.444-.289 1.004-.208 2.136.316 3.05.444.777 1.162 1.348 1.894 1.84 1.437.934 3.002 1.645 4.516 2.442 1.177.622 2.434 1.134 3.45 2.016 1.3 1.063 2.186 2.698 2.143 4.403.063 1.958-.86 3.918-2.415 5.113-1.68 1.334-3.948 1.774-6.042 1.452-.853-.136-1.676-.414-2.47-.747-.766-.305-1.63-.54-2.443-.287-.537.164-.955.6-1.141 1.121l-.38.003c.002-2.603-.003-5.205.002-7.807l.304.017c.203 1.764.769 3.565 2.019 4.873 1.476 1.587 3.74 2.233 5.857 2.107 1.593-.106 3.197-.898 4.033-2.295a4.476 4.476 0 0 0 .601-2.802c-.162-1.132-.916-2.073-1.768-2.788-1.652-1.388-3.696-2.152-5.587-3.139-1.58-.842-3.129-1.88-4.149-3.385-1.093-1.603-1.344-3.805-.454-5.555.7-1.42 2.072-2.438 3.581-2.864 1.422-.417 2.947-.33 4.371.033.794.208 1.564.55 2.394.595.646.015 1.163-.504 1.345-1.092zm-33.694 23.44c-2.855-6.588-5.72-13.172-8.578-19.759-.417-.917-.91-1.862-1.76-2.451-.8-.556-1.814-.632-2.76-.64.002-.136.002-.271 0-.406h10.28v.408c-.837.01-1.7.024-2.49.336-.432.167-.799.543-.87 1.014-.093.608.125 1.208.353 1.762.652 1.5 1.314 2.995 1.966 4.496l4.892 11.18c4.089-9.5 6.351-14.763 6.787-15.79.22-.547.389-1.17.197-1.75-.153-.462-.577-.765-1.013-.933-.713-.269-1.488-.306-2.243-.316.002-.136 0-.271 0-.407h8.616V.59c-.995.006-2.047.164-2.865.773-.797.569-1.3 1.444-1.698 2.317-2.852 6.589-5.695 13.18-8.548 19.768-.067-.003-.2-.006-.266-.007z"/><path fill="#C52033" d="M193.99.001l.403-.001v7.798h-.37c-.212-1.784-.676-3.638-1.877-5.029-.723-.84-1.738-1.405-2.819-1.63-.98-.199-2.027-.246-2.977.114-1.102.393-2.008 1.318-2.337 2.444-.289 1.004-.208 2.136.317 3.05.444.777 1.161 1.348 1.893 1.84 1.438.934 3.003 1.645 4.516 2.442 1.177.622 2.435 1.134 3.45 2.016 1.301 1.063 2.187 2.698 2.143 4.403.063 1.958-.86 3.918-2.415 5.113-1.68 1.334-3.948 1.774-6.042 1.452-.852-.136-1.676-.414-2.47-.747-.765-.305-1.63-.54-2.443-.287-.536.164-.954.6-1.14 1.121l-.381.003c.002-2.603-.002-5.205.002-7.807l.304.017c.203 1.764.77 3.565 2.019 4.873 1.477 1.587 3.74 2.233 5.858 2.107 1.592-.106 3.196-.898 4.033-2.295a4.476 4.476 0 0 0 .6-2.802c-.162-1.132-.915-2.073-1.767-2.788-1.653-1.388-3.696-2.152-5.587-3.139-1.58-.842-3.13-1.88-4.15-3.385-1.093-1.603-1.344-3.805-.454-5.555.701-1.42 2.072-2.438 3.582-2.864 1.422-.417 2.946-.33 4.37.033.795.208 1.565.55 2.395.595.645.015 1.162-.504 1.344-1.092zm-42.094.875c6.27-.007 12.539-.001 18.808-.004.86 2.165 1.705 4.336 2.564 6.502-.143.047-.283.092-.421.14-1.043-2.413-2.879-4.627-5.405-5.541-1.547-.6-3.227-.334-4.84-.39v14.565c.021 1.504-.07 3.014.108 4.513.1.723.305 1.545.977 1.948.799.452 1.76.415 2.65.43-.002.128-.002.254 0 .382h-10.061v-.382c.873-.01 1.806.016 2.6-.402.613-.34.87-1.045.98-1.697.207-1.3.144-2.619.155-3.929V1.581c-1.083.016-2.167-.03-3.248.023-1.963.202-3.746 1.3-5.033 2.764-.821.928-1.473 1.999-1.96 3.137l-.425-.136c.847-2.166 1.708-4.326 2.55-6.493zM128.95.23c2.724-.233 5.532.354 7.878 1.775 2.93 1.735 5.1 4.75 5.69 8.117a11.533 11.533 0 0 1-1.202 7.493c-1.673 3.138-4.791 5.428-8.257 6.18-2.559.56-5.292.392-7.734-.576-2.717-1.062-5.046-3.102-6.41-5.686-1.536-2.854-1.772-6.368-.617-9.398 1.02-2.744 3.1-5.052 5.674-6.43A12.85 12.85 0 0 1 128.95.23zm-.406.837c-2.265.316-4.347 1.6-5.699 3.435-1.87 2.522-2.614 5.774-2.348 8.877.276 2.993 1.5 6.035 3.868 7.979 2.235 1.856 5.382 2.338 8.16 1.668a8.608 8.608 0 0 0 4.577-2.855c1.38-1.643 2.202-3.704 2.545-5.81a13.795 13.795 0 0 0-.723-7.139c-.72-1.885-1.933-3.627-3.62-4.766-1.953-1.343-4.444-1.736-6.76-1.39zm-39.341.183V.845h8.643c1.171.011 2.351-.056 3.513.145 1.558.248 3.124.891 4.17 2.113 1.132 1.306 1.498 3.256.844 4.866-.74 1.779-2.533 2.984-4.403 3.28 2.054.235 4.13 1.096 5.483 2.705.94 1.105 1.338 2.616 1.143 4.044-.165 1.485-.997 2.854-2.179 3.752-1.532 1.177-3.495 1.63-5.395 1.697-3.94.003-7.88 0-11.82.001a25.562 25.562 0 0 1 0-.409c.81-.013 1.662-.012 2.406-.37.515-.242.84-.755.995-1.287.225-.778.252-1.595.28-2.398 0-4.583.002-9.166 0-13.749-.035-.827-.056-1.67-.318-2.462-.161-.5-.508-.954-.995-1.172-.739-.338-1.572-.32-2.367-.35zm6.325 10.474c.004 2.458-.006 4.917.006 7.375.066 1.022.09 2.197.847 2.98.878.753 2.127.657 3.21.687 1.322.05 2.726-.055 3.862-.802 1.288-.803 2.02-2.276 2.185-3.754.21-1.723-.134-3.619-1.326-4.94-.933-1.038-2.346-1.52-3.718-1.54-1.688-.016-3.377-.002-5.066-.006zm0-10.198v9.516h3.857c1.17-.023 2.38-.431 3.178-1.321.981-1.047 1.265-2.562 1.161-3.954-.088-1.14-.504-2.303-1.36-3.093-.809-.8-1.97-1.129-3.085-1.146-1.25-.005-2.5-.001-3.75-.002zm-33.7-.276V.845h10.035c-.002.136-.002.27-.001.407-.816.03-1.672-.006-2.434.332-.466.201-.795.633-.951 1.108-.308.92-.28 1.905-.322 2.864-.002 3.636 0 7.272-.001 10.908.003 1.217-.025 2.44.118 3.65.097.735.284 1.538.885 2.03.655.52 1.53.566 2.33.614 1.189.02 2.376.003 3.564.009 1.017-.017 2.059.085 3.048-.216 1.754-.489 3.13-1.901 3.868-3.53l.405.074c-.415 1.452-.845 2.902-1.268 4.352-6.425.002-12.85.001-19.275.001 0-.136-.002-.272 0-.408 1.016-.034 2.245.055 3-.759.73-.962.63-2.254.7-3.396.017-3.423.002-6.847.007-10.27-.017-1.602.055-3.21-.093-4.808-.084-.76-.256-1.631-.937-2.088-.798-.492-1.778-.427-2.678-.468zM40.94.185c.066.003.2.006.266.007 2.855 6.588 5.72 13.172 8.577 19.759.417.917.911 1.862 1.76 2.451.801.556 1.814.632 2.76.64v.406h-10.28v-.408c.837-.01 1.701-.024 2.49-.335.433-.168.8-.544.87-1.015.094-.608-.124-1.208-.352-1.762-.652-1.5-1.314-2.995-1.967-4.496H35.36c-.654 1.538-1.32 3.07-1.974 4.61-.22.547-.39 1.17-.197 1.75.152.462.577.765 1.013.933.713.269 1.487.306 2.242.317v.406h-8.616l.001-.405c.995-.006 2.046-.164 2.864-.773.798-.569 1.3-1.444 1.698-2.317 2.852-6.589 5.696-13.18 8.549-19.768zm-.766 4.08c-1.52 3.49-3.02 6.99-4.53 10.485 3.047.002 6.093-.002 9.139.002-1.539-3.496-3.065-6.995-4.609-10.488zM2.542.924C8.815.93 15.09.923 21.363.929c.844 2.164 1.705 4.322 2.548 6.487a62.23 62.23 0 0 1-.417.14c-.837-1.93-2.15-3.707-3.95-4.834-1.075-.67-2.319-1.09-3.59-1.112-.905-.003-1.809 0-2.713-.001v17.158c.042.95.02 1.922.314 2.837.166.527.55.997 1.075 1.198.748.279 1.56.271 2.347.265v.409c-3.354 0-6.708-.002-10.06 0l-.001-.41c1.002-.012 2.172.07 2.964-.66.74-.839.695-2.045.767-3.094.01-5.9 0-11.802.004-17.702-1.601.047-3.262-.189-4.798.386-2.536.903-4.401 3.117-5.432 5.542-.14-.042-.28-.086-.421-.13.832-2.166 1.7-4.32 2.542-6.483z"/></g></svg>
                    </div>
                </div>
            </header>
        )
    }
}
